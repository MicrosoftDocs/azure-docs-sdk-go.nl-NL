---
title: Verificatie met de Azure SDK voor Go
description: Lees meer over de verificatiemethoden die beschikbaar zijn in de Azure SDK voor Go en hoe u ze gebruikt.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 04/03/2018
ms.topic: conceptual
ms.prod: azure
ms.technology: azure-sdk-go
ms.devlang: go
ms.service: active-directory
ms.component: authentication
ms.openlocfilehash: 370f5607b89c0044022f7987d06c3a55c9d6f352
ms.sourcegitcommit: f08abf902b48f8173aa6e261084ff2cfc9043305
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 05/03/2018
ms.locfileid: "32319880"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="f7e70-103">Verificatiemethoden in de Azure SDK voor Go</span><span class="sxs-lookup"><span data-stu-id="f7e70-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="f7e70-104">De Azure SDK voor Go biedt tal van verificatietypen en -methoden die in uw toepassing kunnen worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="f7e70-105">Ondersteunde verificatiemethoden variÃ«ren van het ophalen van gegevens uit omgevingsvariabelen tot interactieve webgebaseerde verificatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="f7e70-106">In dit artikel vindt u de beschikbare typen verificatie in de SDK en de methoden voor het gebruik ervan.</span><span class="sxs-lookup"><span data-stu-id="f7e70-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="f7e70-107">U maakt ook kennis met aanbevolen procedures die u helpen te bepalen welk verificatietype geschikt is voor uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="f7e70-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="f7e70-108">Beschikbare verificatietypen en -methoden</span><span class="sxs-lookup"><span data-stu-id="f7e70-108">Available authentication types and methods</span></span>

<span data-ttu-id="f7e70-109">De Azure SDK voor Go biedt verschillende typen verificatie met verschillende referentiesets.</span><span class="sxs-lookup"><span data-stu-id="f7e70-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="f7e70-110">Al deze verificatietypen zijn beschikbaar via verschillende verificatiemethoden, die bepalen hoe SDK deze referenties gebruikt als invoer.</span><span class="sxs-lookup"><span data-stu-id="f7e70-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="f7e70-111">In de volgende tabel worden de beschikbare typen verificatie beschreven, evenals situaties waarin ze worden aanbevolen voor uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="f7e70-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="f7e70-112">Verificatietype</span><span class="sxs-lookup"><span data-stu-id="f7e70-112">Authentication type</span></span> | <span data-ttu-id="f7e70-113">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="f7e70-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="f7e70-114">Verificatie op basis van certificaat</span><span class="sxs-lookup"><span data-stu-id="f7e70-114">Certificate-based authentication</span></span> | <span data-ttu-id="f7e70-115">U hebt een X509-certificaat dat is geconfigureerd voor een AAD-gebruiker (Azure Active Directory) of service-principal.</span><span class="sxs-lookup"><span data-stu-id="f7e70-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="f7e70-116">Zie [Aan de slag met verificatie op basis van certificaten in Azure Active Directory] voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="f7e70-117">Clientreferenties</span><span class="sxs-lookup"><span data-stu-id="f7e70-117">Client credentials</span></span> | <span data-ttu-id="f7e70-118">U hebt een geconfigureerde service-principal die is ingesteld voor deze toepassing of een klasse toepassingen waar deze onderdeel van uitmaakt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="f7e70-119">Zie [Een service-principal maken met Azure CLI 2.0] voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-119">To learn more, see [Create a service principal with Azure CLI 2.0].</span></span> |
| <span data-ttu-id="f7e70-120">Managed Service Identity (MSI)</span><span class="sxs-lookup"><span data-stu-id="f7e70-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="f7e70-121">Uw toepassing wordt uitgevoerd op een Azure-resource die is geconfigureerd met Managed Service Identity (MSI).</span><span class="sxs-lookup"><span data-stu-id="f7e70-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="f7e70-122">Zie [Managed Service Identity (MSI) voor Azure-resources] voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="f7e70-123">Apparaattoken</span><span class="sxs-lookup"><span data-stu-id="f7e70-123">Device token</span></span> | <span data-ttu-id="f7e70-124">Uw toepassing is __uitsluitend__ bedoeld om interactief te worden gebruikt en heeft een groot aantal gebruikers, die mogelijk afkomstig zijn van meerdere AAD-tenants.</span><span class="sxs-lookup"><span data-stu-id="f7e70-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="f7e70-125">Gebruikers hebben toegang tot een webbrowser om zich aan te melden.</span><span class="sxs-lookup"><span data-stu-id="f7e70-125">Users have access to a web browser to log in.</span></span> <span data-ttu-id="f7e70-126">Zie [Apparaattokenverificatie gebruiken](#use-device-token-authentication) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="f7e70-127">Gebruikersnaam en wachtwoord</span><span class="sxs-lookup"><span data-stu-id="f7e70-127">Username/password</span></span> | <span data-ttu-id="f7e70-128">U hebt een interactieve toepassing die geen gebruik van maken van een andere verificatiemethode.</span><span class="sxs-lookup"><span data-stu-id="f7e70-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="f7e70-129">Multi-Factor Authentication is niet ingeschakeld voor de AAD-aanmelding van uw gebruikers.</span><span class="sxs-lookup"><span data-stu-id="f7e70-129">Your users do not have multi-factor authentication enabled for their AAD login.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="f7e70-130">Als u een ander verificatietype dan clientreferenties gebruikt, moet uw toepassing worden geregistreerd in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f7e70-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="f7e70-131">Zie [Toepassingen integreren met Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>

> [!NOTE]
> <span data-ttu-id="f7e70-132">Voorkom verificatie aan de hand van gebruikersnaam en wachtwoord, tenzij u speciale vereisten hebt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="f7e70-133">In situaties waarin aanmelding op basis van gebruikers geschikt is, kan doorgaans in plaats hiervan apparaattokenverificatie worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-133">In situations where user-based login is appropriate, device token authentication can usually be used instead.</span></span>

[Aan de slag met verificatie op basis van certificaten in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Een service-principal maken met Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Managed Service Identity (MSI) voor Azure-resources]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="f7e70-137">Deze verificatietypen zijn beschikbaar via verschillende methoden.</span><span class="sxs-lookup"><span data-stu-id="f7e70-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="f7e70-138">Met [_verificatie op basis van de omgeving_](#use-environment-based-authentication) worden referenties rechtstreeks uit de omgeving van het programma gelezen.</span><span class="sxs-lookup"><span data-stu-id="f7e70-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="f7e70-139">Met [_verificatie op basis van het bestand_](#use-file-based-authentication) wordt er een bestand geladen met de referenties van de service-principal.</span><span class="sxs-lookup"><span data-stu-id="f7e70-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="f7e70-140">Met [_verificatie op basis van de client_](#use-an-authentication-client) wordt er gebruikgemaakt van een object in Go-code en bent u verantwoordelijk voor de levering van de referenties wanneer het programma wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="f7e70-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="f7e70-141">Met [_apparaattokenverificatie_](#use-device-token-authentication) tot slot moeten gebruikers zich interactief met een token aanmelden via een webbrowser. Deze methode kan niet worden gebruikt met omgevings- of bestandsgebaseerde verificatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to log in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="f7e70-142">Alle verificatiefuncties en -typen zijn beschikbaar in het `github.com/Azure/go-autorest/autorest/azure/auth`-pakket.</span><span class="sxs-lookup"><span data-stu-id="f7e70-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="f7e70-143">Voorkom clientgebaseerde verificatie, tenzij u speciale vereisten hebt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="f7e70-144">Deze verificatiemethode werkt onjuiste handelwijzen in de hand.</span><span class="sxs-lookup"><span data-stu-id="f7e70-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="f7e70-145">Vooral clientgebaseerde verificatie maakt het verleidelijk om referenties vast te leggen.</span><span class="sxs-lookup"><span data-stu-id="f7e70-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="f7e70-146">Het schrijven van aangepaste code voor verificatie kan ook worden onderbroken bij het gebruik van toekomstige SDK-versies als de verificatievereisten veranderen.</span><span class="sxs-lookup"><span data-stu-id="f7e70-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="f7e70-147">Verificatie op basis van de omgeving gebruiken</span><span class="sxs-lookup"><span data-stu-id="f7e70-147">Use environment-based authentication</span></span>

<span data-ttu-id="f7e70-148">Als uw toepassing wordt uitgevoerd in een strak beheerde omgeving, zoals in een container, is verificatie op basis van de omgeving is een logische keuze.</span><span class="sxs-lookup"><span data-stu-id="f7e70-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="f7e70-149">U kunt de shell-omgeving configureren voordat u uw toepassing uitvoert en de Go SDK deze omgevingsvariabelen tijdens runtime leest om te verifiÃ«ren bij Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e70-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span> 

<span data-ttu-id="f7e70-150">Verificatie op basis van de omgeving biedt ondersteuning voor alle verificatiemethoden behalve apparaattokens, die in de volgende volgorde worden geÃ«valueerd: clientreferenties, certificaten, gebruikersnaam en wachtwoord en Managed Service Identity (MSI).</span><span class="sxs-lookup"><span data-stu-id="f7e70-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="f7e70-151">Als een vereiste omgevingsvariabele is uitgeschakeld of de SDK een weigering van de verificatieservice ontvangt, wordt het volgende verificatietype geprobeerd.</span><span class="sxs-lookup"><span data-stu-id="f7e70-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="f7e70-152">Als de SDK kan niet worden geverifieerd vanuit de omgeving, wordt er een fout geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="f7e70-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="f7e70-153">In de volgende tabel worden de omgevingsvariabelen vermeld die moeten worden ingesteld voor elk verificatietype dat wordt ondersteund door de verificatie op basis van de omgeving.</span><span class="sxs-lookup"><span data-stu-id="f7e70-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="f7e70-154">Verificatietype</span><span class="sxs-lookup"><span data-stu-id="f7e70-154">Authentication type</span></span> | <span data-ttu-id="f7e70-155">Omgevingsvariabele</span><span class="sxs-lookup"><span data-stu-id="f7e70-155">Environment variable</span></span> | <span data-ttu-id="f7e70-156">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="f7e70-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="f7e70-157">__Clientreferenties__</span><span class="sxs-lookup"><span data-stu-id="f7e70-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="f7e70-158">De id voor de Active Directory-tenant waar de service-principal bij hoort.</span><span class="sxs-lookup"><span data-stu-id="f7e70-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="f7e70-159">De naam of id van de service-principal.</span><span class="sxs-lookup"><span data-stu-id="f7e70-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="f7e70-160">Het geheim dat is gekoppeld aan de service-principal.</span><span class="sxs-lookup"><span data-stu-id="f7e70-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="f7e70-161">__Certificaat__</span><span class="sxs-lookup"><span data-stu-id="f7e70-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="f7e70-162">De id voor de Active Directory-tenant waarvoor het certificaat is geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="f7e70-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="f7e70-163">De client-id van de toepassing die is gekoppeld aan het certificaat.</span><span class="sxs-lookup"><span data-stu-id="f7e70-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="f7e70-164">Het pad naar het clientcertificaatbestand.</span><span class="sxs-lookup"><span data-stu-id="f7e70-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="f7e70-165">Het wachtwoord voor het clientcertificaat.</span><span class="sxs-lookup"><span data-stu-id="f7e70-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="f7e70-166">__Gebruikersnaam en wachtwoord__</span><span class="sxs-lookup"><span data-stu-id="f7e70-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="f7e70-167">De id voor de Active Directory-tenant waar de gebruiker bij hoort.</span><span class="sxs-lookup"><span data-stu-id="f7e70-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="f7e70-168">De client-id voor de toepassing.</span><span class="sxs-lookup"><span data-stu-id="f7e70-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="f7e70-169">De gebruikersnaam waarmee moet worden aangemeld.</span><span class="sxs-lookup"><span data-stu-id="f7e70-169">The username to log in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="f7e70-170">Het wachtwoord waarmee moet worden aangemeld.</span><span class="sxs-lookup"><span data-stu-id="f7e70-170">The password to log in with.</span></span> |
| <span data-ttu-id="f7e70-171">__MSI__</span><span class="sxs-lookup"><span data-stu-id="f7e70-171">__MSI__</span></span> | | <span data-ttu-id="f7e70-172">Voor MSI hoeven geen referenties te worden ingesteld.</span><span class="sxs-lookup"><span data-stu-id="f7e70-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="f7e70-173">De toepassing moet worden uitgevoerd op een Azure-resource die is geconfigureerd voor het gebruik van MSI.</span><span class="sxs-lookup"><span data-stu-id="f7e70-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="f7e70-174">Zie [Managed Service Identity (MSI) voor Azure-resources] voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="f7e70-175">Als u verbinding moet maken met een andere cloud of een ander beheereindpunt dan de standaard openbare Azure-cloud, kunt u ook de volgende omgevingsvariabelen instellen.</span><span class="sxs-lookup"><span data-stu-id="f7e70-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="f7e70-176">De meestvoorkomende redenen om deze in te stellen, zijn als u Azure Stack, een cloud in een andere geografische regio of het klassieke Azure-implementatiemodel gebruikt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="f7e70-177">Omgevingsvariabele</span><span class="sxs-lookup"><span data-stu-id="f7e70-177">Environment variable</span></span> | <span data-ttu-id="f7e70-178">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="f7e70-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="f7e70-179">De naam van de cloudomgeving waarmee verbinding wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="f7e70-180">De Active Directory-resource-id die moet worden gebruikt om verbinding te maken.</span><span class="sxs-lookup"><span data-stu-id="f7e70-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="f7e70-181">Dit moet een URI zijn die verwijst naar het beheereindpunt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="f7e70-182">Wanneer u gebruikmaakt van verificatie op basis van de omgeving, roept u de functie [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) aan om uw verificatieobject op te halen.</span><span class="sxs-lookup"><span data-stu-id="f7e70-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="f7e70-183">Dit object wordt vervolgens ingesteld op de `Authorizer`-eigenschap van clients zodat deze toegang krijgen tot Azure.</span><span class="sxs-lookup"><span data-stu-id="f7e70-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="f7e70-184">Verificatie in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f7e70-184">Authentication on Azure Stack</span></span>

<span data-ttu-id="f7e70-185">Als u verificatie wilt uitvoeren in Azure Stack, moet u de volgende variabelen instellen:</span><span class="sxs-lookup"><span data-stu-id="f7e70-185">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="f7e70-186">Omgevingsvariabele</span><span class="sxs-lookup"><span data-stu-id="f7e70-186">Environment variable</span></span> | <span data-ttu-id="f7e70-187">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="f7e70-187">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="f7e70-188">Het Azure Active Directory-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-188">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="f7e70-189">De resource-id voor Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f7e70-189">The Active Directory resource ID.</span></span> |

<span data-ttu-id="f7e70-190">Deze variabelen kunnen worden opgehaald uit de Azure Stack-metagegevens.</span><span class="sxs-lookup"><span data-stu-id="f7e70-190">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="f7e70-191">Als u de metagegevens wilt ophalen, opent u een webbrowser in uw Azure Stack-omgeving en volgt u deze URL: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span><span class="sxs-lookup"><span data-stu-id="f7e70-191">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="f7e70-192">De `ResourceManagerURL` varieert op basis van de regionaam, de computernaam en de externe volledig gekwalificeerde domeinnaam (FQDN) van uw Azure Stack-implementatie:</span><span class="sxs-lookup"><span data-stu-id="f7e70-192">The `ResourceManagerURL` varies based on the region name, machine name and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="f7e70-193">Omgeving</span><span class="sxs-lookup"><span data-stu-id="f7e70-193">Environment</span></span> | <span data-ttu-id="f7e70-194">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="f7e70-194">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="f7e70-195">Development Kit</span><span class="sxs-lookup"><span data-stu-id="f7e70-195">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="f7e70-196">GeÃ¯ntegreerde systemen</span><span class="sxs-lookup"><span data-stu-id="f7e70-196">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="f7e70-197">Voor meer informatie over het gebruik van de Azure-SDK voor Go in Azure Stack raadpleegt u [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/en-us/azure/azure-stack/user/azure-stack-version-profiles-go) (API-versieprofielen met Go gebruiken in Azure Stack).</span><span class="sxs-lookup"><span data-stu-id="f7e70-197">For more details on how to use Azure SDK for Go on Azure Stack see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/en-us/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>


## <a name="use-file-based-authentication"></a><span data-ttu-id="f7e70-198">Verificatie op basis van een bestand gebruiken</span><span class="sxs-lookup"><span data-stu-id="f7e70-198">Use file-based authentication</span></span>

<span data-ttu-id="f7e70-199">Verificatie op basis van een bestand werkt alleen met clientreferenties wanneer deze zijn opgeslagen in een lokale bestandsindeling die is gegenereerd door [Azure CLI 2.0](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="f7e70-199">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI 2.0](/cli/azure).</span></span> <span data-ttu-id="f7e70-200">U kunt dit bestand gemakkelijk maken wanneer u een nieuwe service-principal met de parameter `--sdk-auth` maakt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-200">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="f7e70-201">Als u van plan bent verificatie op basis van een bestand te gebruiken, zorgt u ervoor dat dit argument wordt opgegeven bij het maken van een service-principal.</span><span class="sxs-lookup"><span data-stu-id="f7e70-201">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="f7e70-202">Aangezien de CLI de uitvoer afdrukt naar `stdout`, moet de uitvoer worden omgeleid naar een bestand.</span><span class="sxs-lookup"><span data-stu-id="f7e70-202">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="f7e70-203">Stel de omgevingsvariabele `AZURE_AUTH_LOCATION` in op waar het verificatiebestand zich bevindt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-203">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="f7e70-204">Deze omgevingsvariabele wordt gelezen door de toepassing en de aanwezige referenties worden geparseerd.</span><span class="sxs-lookup"><span data-stu-id="f7e70-204">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="f7e70-205">Als u het verficatiebestand tijdens runtime moet selecteren, bewerkt u de omgeving van het programma met behulp van de [os.SETENV](https://golang.org/pkg/os/#Setenv)-functie.</span><span class="sxs-lookup"><span data-stu-id="f7e70-205">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="f7e70-206">De functie [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) moet worden aangeroepen om de verificatiegegevens te laden.</span><span class="sxs-lookup"><span data-stu-id="f7e70-206">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="f7e70-207">In tegenstelling tot verificatie op basis van de omgeving is voor verificatie op basis van een bestand een resource-eindpunt vereist.</span><span class="sxs-lookup"><span data-stu-id="f7e70-207">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="f7e70-208">Zie [Een service-principal maken met Azure CLI 2.0] voor meer informatie over het gebruik van service-principals en het beheer van de toegangsmachtigingen.</span><span class="sxs-lookup"><span data-stu-id="f7e70-208">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI 2.0].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="f7e70-209">Apparaattokenverificatie gebruiken</span><span class="sxs-lookup"><span data-stu-id="f7e70-209">Use device token authentication</span></span>

<span data-ttu-id="f7e70-210">Als u wilt dat gebruikers zich interactief aanmelden, is apparaattokenverificatie de beste manier om dit mogelijk te maken.</span><span class="sxs-lookup"><span data-stu-id="f7e70-210">If you want users to log in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="f7e70-211">Deze verificatiestroom geeft gebruikers een token die in een aanmeldsite van Microsoft kan worden geplakt, waar ze zich vervolgens aanmelden met een AAD-account (Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="f7e70-211">This authentication flow passes the user a token to paste into a Microsoft login site, where they then log in with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="f7e70-212">Deze verificatiemethode biedt ondersteuning voor accounts waarvoor Multi-Factor Authentication is ingeschakeld, in tegenstelling tot de standaardverificatie met gebruik van gebruikersnaam en wachtwoord.</span><span class="sxs-lookup"><span data-stu-id="f7e70-212">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="f7e70-213">Als u apparaattokenverificatie wilt gebruiken, maakt u een [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig)-authorizer met de functie [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="f7e70-213">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="f7e70-214">Roep [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) aan op het resulterende object om het verificatieproces te starten.</span><span class="sxs-lookup"><span data-stu-id="f7e70-214">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="f7e70-215">Bij apparaatstroomverificatie wordt het programma niet uitgevoerd totdat de gehele verificatiestroom is voltooid.</span><span class="sxs-lookup"><span data-stu-id="f7e70-215">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="f7e70-216">Een verificatieclient gebruiken</span><span class="sxs-lookup"><span data-stu-id="f7e70-216">Use an authentication client</span></span>

<span data-ttu-id="f7e70-217">Als u een specifiek type verificatie vereist en bereid bent om het programma het werk te laten doen om de verificatiegegevens van de gebruiker te laden, kunt u een willekeurige client gebruiken die voldoet aan de [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig)-interface.</span><span class="sxs-lookup"><span data-stu-id="f7e70-217">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="f7e70-218">Gebruik een type waarmee deze interface wordt geÃ¯mplementeerd, als u een interactief programma wilt, gebruik gespecialiseerde configuratiebestanden of gebruik een vereiste waarmee u voorkomt dat er een andere verificatiemethode wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="f7e70-218">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="f7e70-219">Leg Azure-referenties nooit vast in een toepassing.</span><span class="sxs-lookup"><span data-stu-id="f7e70-219">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="f7e70-220">Als geheimen in een binair bestand voor een toepassing worden opgeslagen, is het eenvoudiger voor een aanvaller om deze uit te pakken, ongeacht of de toepassing wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="f7e70-220">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="f7e70-221">Hiermee lopen alle Azure-resources waarvoor de referenties worden geverifieerd risico.</span><span class="sxs-lookup"><span data-stu-id="f7e70-221">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="f7e70-222">De volgende tabel bevat de typen in de SDK die voldoen aan de `AuthorizerConfig`-interface.</span><span class="sxs-lookup"><span data-stu-id="f7e70-222">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="f7e70-223">Verificatietype</span><span class="sxs-lookup"><span data-stu-id="f7e70-223">Authentication type</span></span> | <span data-ttu-id="f7e70-224">Type authorizer</span><span class="sxs-lookup"><span data-stu-id="f7e70-224">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="f7e70-225">Verificatie op basis van certificaat</span><span class="sxs-lookup"><span data-stu-id="f7e70-225">Certificate-based authentication</span></span> | <span data-ttu-id="f7e70-226">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="f7e70-226">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="f7e70-227">Clientreferenties</span><span class="sxs-lookup"><span data-stu-id="f7e70-227">Client credentials</span></span> | <span data-ttu-id="f7e70-228">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="f7e70-228">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="f7e70-229">Managed Service Identity (MSI)</span><span class="sxs-lookup"><span data-stu-id="f7e70-229">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="f7e70-230">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="f7e70-230">[MSIConfig]</span></span> |
| <span data-ttu-id="f7e70-231">Gebruikersnaam en wachtwoord</span><span class="sxs-lookup"><span data-stu-id="f7e70-231">Username/password</span></span> | <span data-ttu-id="f7e70-232">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="f7e70-232">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="f7e70-237">Maak een verificator met de bijbehorende functie `New` en roep vervolgens `Authorize` aan op het resulterende object om de verificatie uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="f7e70-237">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="f7e70-238">Als u bijvoorbeeld verificatie op basis van een certificaat wilt gebruiken:</span><span class="sxs-lookup"><span data-stu-id="f7e70-238">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
